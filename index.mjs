// Copyright (c) 2022 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import e from"https://cdn.jsdelivr.net/gh/stdlib-js/streams-node-transform@esm/index.mjs";import t from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-nonenumerable-read-only-property@esm/index.mjs";import r from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-function@esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/error-tools-fmtprodmsg@esm/index.mjs";import i from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-nonenumerable-read-only-accessor@esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-string@esm/index.mjs";import s from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-boolean@esm/index.mjs";import a from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-plain-object@esm/index.mjs";import u from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-has-own-property@esm/index.mjs";import l from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-copy@esm/index.mjs";import c from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-inherit@esm/index.mjs";import f from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-property@esm/index.mjs";import h from"https://cdn.jsdelivr.net/gh/stdlib-js/time-tic@esm/index.mjs";import m from"https://cdn.jsdelivr.net/gh/stdlib-js/time-toc@esm/index.mjs";import p from"https://cdn.jsdelivr.net/gh/stdlib-js/string-trim@esm/index.mjs";import d from"https://cdn.jsdelivr.net/gh/stdlib-js/string-replace@esm/index.mjs";import v from"https://cdn.jsdelivr.net/gh/stdlib-js/regexp-eol@esm/index.mjs";import w from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-null@esm/index.mjs";import b from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-positive-integer@esm/index.mjs";import g from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-browser@esm/index.mjs";import y from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-node-writable-stream-like@esm/index.mjs";import _ from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-pick@esm/index.mjs";import j from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-omit@esm/index.mjs";import k from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-noop@esm/index.mjs";import x from"https://cdn.jsdelivr.net/gh/stdlib-js/string-from-code-point@esm/index.mjs";function E(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})})),t}function T(){}function L(){L.init.call(this)}function P(e){return void 0===e._maxListeners?L.defaultMaxListeners:e._maxListeners}function O(e,t,r){if(t)e.call(r);else for(var n=e.length,i=R(e,n),o=0;o<n;++o)i[o].call(r)}function C(e,t,r,n){if(t)e.call(r,n);else for(var i=e.length,o=R(e,i),s=0;s<i;++s)o[s].call(r,n)}function M(e,t,r,n,i){if(t)e.call(r,n,i);else for(var o=e.length,s=R(e,o),a=0;a<o;++a)s[a].call(r,n,i)}function S(e,t,r,n,i,o){if(t)e.call(r,n,i,o);else for(var s=e.length,a=R(e,s),u=0;u<s;++u)a[u].call(r,n,i,o)}function A(e,t,r,n){if(t)e.apply(r,n);else for(var i=e.length,o=R(e,i),s=0;s<i;++s)o[s].apply(r,n)}function D(e,t,r,n){var i,o,s,a;if("function"!=typeof r)throw new TypeError('"listener" argument must be a function');if((o=e._events)?(o.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),s=o[t]):(o=e._events=new T,e._eventsCount=0),s){if("function"==typeof s?s=o[t]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),!s.warned&&(i=P(e))&&i>0&&s.length>i){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=s.length,a=u,"function"==typeof console.warn?console.warn(a):console.log(a)}}else s=o[t]=r,++e._eventsCount;return e}function N(e,t,r){var n=!1;function i(){e.removeListener(t,i),n||(n=!0,r.apply(e,arguments))}return i.listener=r,i}function q(e){var t=this._events;if(t){var r=t[e];if("function"==typeof r)return 1;if(r)return r.length}return 0}function R(e,t){for(var r=new Array(t);t--;)r[t]=e[t];return r}T.prototype=Object.create(null),L.EventEmitter=L,L.usingDomains=!1,L.prototype.domain=void 0,L.prototype._events=void 0,L.prototype._maxListeners=void 0,L.defaultMaxListeners=10,L.init=function(){this.domain=null,L.usingDomains&&undefined.active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new T,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},L.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},L.prototype.getMaxListeners=function(){return P(this)},L.prototype.emit=function(e){var t,r,n,i,o,s,a,u="error"===e;if(s=this._events)u=u&&null==s.error;else if(!u)return!1;if(a=this.domain,u){if(t=arguments[1],!a){if(t instanceof Error)throw t;var l=new Error('Uncaught, unspecified "error" event. ('+t+")");throw l.context=t,l}return t||(t=new Error('Uncaught, unspecified "error" event')),t.domainEmitter=this,t.domain=a,t.domainThrown=!1,a.emit("error",t),!1}if(!(r=s[e]))return!1;var c="function"==typeof r;switch(n=arguments.length){case 1:O(r,c,this);break;case 2:C(r,c,this,arguments[1]);break;case 3:M(r,c,this,arguments[1],arguments[2]);break;case 4:S(r,c,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(n-1),o=1;o<n;o++)i[o-1]=arguments[o];A(r,c,this,i)}return!0},L.prototype.addListener=function(e,t){return D(this,e,t,!1)},L.prototype.on=L.prototype.addListener,L.prototype.prependListener=function(e,t){return D(this,e,t,!0)},L.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,N(this,e,t)),this},L.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,N(this,e,t)),this},L.prototype.removeListener=function(e,t){var r,n,i,o,s;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(n=this._events))return this;if(!(r=n[e]))return this;if(r===t||r.listener&&r.listener===t)0==--this._eventsCount?this._events=new T:(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,o=r.length;o-- >0;)if(r[o]===t||r[o].listener&&r[o].listener===t){s=r[o].listener,i=o;break}if(i<0)return this;if(1===r.length){if(r[0]=void 0,0==--this._eventsCount)return this._events=new T,this;delete n[e]}else!function(e,t){for(var r=t,n=r+1,i=e.length;n<i;r+=1,n+=1)e[r]=e[n];e.pop()}(r,i);n.removeListener&&this.emit("removeListener",e,s||t)}return this},L.prototype.off=function(e,t){return this.removeListener(e,t)},L.prototype.removeAllListeners=function(e){var t,r;if(!(r=this._events))return this;if(!r.removeListener)return 0===arguments.length?(this._events=new T,this._eventsCount=0):r[e]&&(0==--this._eventsCount?this._events=new T:delete r[e]),this;if(0===arguments.length){for(var n,i=Object.keys(r),o=0;o<i.length;++o)"removeListener"!==(n=i[o])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=new T,this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(t)do{this.removeListener(e,t[t.length-1])}while(t[0]);return this},L.prototype.listeners=function(e){var t,r=this._events;return r&&(t=r[e])?"function"==typeof t?[t.listener||t]:function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(t):[]},L.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):q.call(e,t)},L.prototype.listenerCount=q,L.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var I=E(Object.freeze({__proto__:null,default:L,EventEmitter:L})),X=setTimeout,z=clearTimeout,G=X,K=z;var U=function(){var e,t;if(this._skip)return this.comment("SKIP "+this.name),this.end();if(!this._benchmark)return this.comment("TODO "+this.name),this.end();e=this,this._running=!0,t=G((function(){e.fail("benchmark timed out after "+e.timeout+"ms")}),this.timeout),this.once("end",(function(){K(t)})),this.emit("prerun"),this._benchmark(this),this.emit("run")};var V=function(){this._exited||this._ended||(this._exited=!0,this.fail("benchmark exited without ending"),this._running||this.end())};var B=function(){return this._ended},W=n,Z=u;var F=function(e,t){var r;r={id:this._count,ok:e,skip:t.skip,todo:t.todo,name:t.message||"(unnamed assert)",operator:t.operator},Z(t,"actual")&&(r.actual=t.actual),Z(t,"expected")&&(r.expected=t.expected),e||(r.error=t.error||new Error(this.name),new Error(W("05d0C"))),this._count+=1,this.emit("result",r)},H=p,Y=d,J=v.REGEXP,Q=/^#\s*/;var $=function(e){var t,r;for(t=(e=H(e)).split(J),r=0;r<t.length;r++)e=H(t[r]),e=Y(e,Q,""),this.emit("result",e)};var ee=function(e,t){this._assert(!0,{message:t,operator:"skip",skip:!0})};var te=function(e,t){this._assert(!!e,{message:t,operator:"todo",todo:!0})};var re=function(e){this._assert(!1,{message:e,operator:"fail"})};var ne=function(e){this._assert(!0,{message:e,operator:"pass"})};var ie=function(e,t){this._assert(!!e,{message:t||"should be truthy",operator:"ok",expected:!0,actual:e})};var oe=function(e,t){this._assert(!e,{message:t||"should be falsy",operator:"notOk",expected:!1,actual:e})};var se=function(e,t,r){this._assert(e===t,{message:r||"should be equal",operator:"equal",expected:t,actual:e})};var ae=function(e,t,r){this._assert(e!==t,{message:r||"should not be equal",operator:"notEqual",expected:t,actual:e})};var ue=function(e,t,r){this.comment("actual: "+e+". expected: "+t+". msg: "+r+".")};var le=function(e,t,r){this.comment("actual: "+e+". expected: "+t+". msg: "+r+".")};var ce=function(e){setTimeout(e,0)},fe=ce;var he=function(){var e=this;this._ended?this.fail(".end() called more than once"):fe((function(){e.emit("end")})),this._ended=!0,this._running=!1},me=I.EventEmitter,pe=f,de=t,ve=h,we=m,be=U,ge=V,ye=B,_e=F,je=$,ke=ee,xe=te,Ee=re,Te=ne,Le=ie,Pe=oe,Oe=se,Ce=ae,Me=ue,Se=le,Ae=he;function De(e,t,r){var n,i,o,s;return this instanceof De?(o=this,n=!1,i=!1,me.call(this),de(this,"_benchmark",r),de(this,"_skip",t.skip),pe(this,"_ended",{configurable:!1,enumerable:!1,writable:!0,value:!1}),pe(this,"_running",{configurable:!1,enumerable:!1,writable:!0,value:!1}),pe(this,"_exited",{configurable:!1,enumerable:!1,writable:!0,value:!1}),pe(this,"_count",{configurable:!1,enumerable:!1,writable:!0,value:0}),de(this,"name",e),de(this,"tic",(function(){n?o.fail(".tic() called more than once"):(o.emit("tic"),n=!0,s=ve())})),de(this,"toc",(function(){var e,t,r,a;if(!1===n)return o.fail(".toc() called before .tic()");if(e=we(s),i)return o.fail(".toc() called more than once");i=!0,o.emit("toc"),t=e[0]+e[1]/1e9,r=o.iterations/t,a={ok:!0,operator:"result",iterations:o.iterations,elapsed:t,rate:r},o.emit("result",a)})),de(this,"iterations",t.iterations),de(this,"timeout",t.timeout),this):new De(e,t,r)}c(De,me),de(De.prototype,"run",be),de(De.prototype,"exit",ge),de(De.prototype,"ended",ye),de(De.prototype,"_assert",_e),de(De.prototype,"comment",je),de(De.prototype,"skip",ke),de(De.prototype,"todo",xe),de(De.prototype,"fail",Ee),de(De.prototype,"pass",Te),de(De.prototype,"ok",Le),de(De.prototype,"notOk",Pe),de(De.prototype,"equal",Oe),de(De.prototype,"notEqual",Ce),de(De.prototype,"deepEqual",Me),de(De.prototype,"notDeepEqual",Se),de(De.prototype,"end",Ae);var Ne=De,qe=d,Re=u,Ie=v.REGEXP,Xe=/\s+/g;var ze=function(e,t){var r,n,i,o,s,a,u,l;if(u="",e.ok||(u+="not "),u+="ok "+t,e.name&&(u+=" "+qe(e.name.toString(),Xe," ")),e.skip?u+=" # SKIP":e.todo&&(u+=" # TODO"),u+="\n",e.ok)return u;if("  ",u+="  ---\n",u+="  operator: "+e.operator+"\n",(Re(e,"actual")||Re(e,"expected"))&&(i=e.expected,(o=e.actual)!=o&&i!=i))throw new Error("unexpected error.");if(e.at&&(u+="  at: "+e.at+"\n"),e.actual&&(r=e.actual.stack),e.error&&(n=e.error.stack),s=r||n)for(a=s.toString().split(Ie),u+="  stack: |-\n",l=0;l<a.length;l++)u+="    "+a[l]+"\n";return u+="  ...\n"};var Ge=function(e){var t="  ---\n";return t+="  iterations: "+e.iterations+"\n",t+="  elapsed: "+e.elapsed+"\n",t+="  rate: "+e.rate+"\n",t+="  ...\n"},Ke=o.isPrimitive,Ue=ze,Ve=Ge;var Be=function(e){var t=this;this._benchmarks.push(e),e.once("prerun",(function(){t._stream.write("# "+e.name+"\n")})),e.on("result",(function(e){if(Ke(e))return t._stream.write("# "+e+"\n");if("result"===e.operator)return e=Ve(e),t._stream.write(e);t.total+=1,e.ok?(e.skip?t.skip+=1:e.todo&&(t.todo+=1),t.pass+=1):e.todo?(t.pass+=1,t.todo+=1):t.fail+=1;e=Ue(e,t.total),t._stream.write(e)})),this.emit("_push",e)},We=e,Ze=o.isPrimitive,Fe=ce;var He=function(e){var t,r,n,i;return n=this,t=new We(r=arguments.length?e:{}),r.objectMode?(i=0,this.on("_push",u),this.on("done",l)):(t.write("TAP version 13\n"),this._stream.pipe(t)),this.on("_run",a),t;function o(){Fe(s)}function s(){var e=n._benchmarks.shift();if(e)return e.run(),e.ended()?o():e.once("end",o);n._running=!1,n.emit("done")}function a(){if(!n._running)return n._running=!0,o()}function u(e){var r=i;i+=1,e.once("prerun",(function(){var n={type:"benchmark",name:e.name,id:r};t.write(n)})),e.on("result",(function(e){Ze(e)?e={benchmark:r,type:"comment",name:e}:"result"===e.operator?(e.benchmark=r,e.type="result"):(e.benchmark=r,e.type="assert");t.write(e)})),e.on("end",(function(){t.write({benchmark:r,type:"end"})}))}function l(){t.destroy()}};var Ye=function(){this.emit("_run")};var Je=function(){this._benchmarks.length=0};var Qe=function(){var e=this;this._closed||(this._closed=!0,this._benchmarks.length?(this.clear(),this._stream.write("# WARNING: harness closed before completion.\n")):(this._stream.write("#\n"),this._stream.write("1.."+this.total+"\n"),this._stream.write("# total "+this.total+"\n"),this._stream.write("# pass  "+this.pass+"\n"),this.fail&&this._stream.write("# fail  "+this.fail+"\n"),this.skip&&this._stream.write("# skip  "+this.skip+"\n"),this.todo&&this._stream.write("# todo  "+this.todo+"\n"),this.fail||this._stream.write("#\n# ok\n")),this._stream.once("close",(function(){e.emit("close")})),this._stream.destroy())};var $e=function(){var e,t;for(t=0;t<this._benchmarks.length;t++)this._benchmarks[t].exit();e=this,this.clear(),this._stream.once("close",(function(){e.emit("close")})),this._stream.destroy()},et=I.EventEmitter,tt=f,rt=e,nt=Be,it=He,ot=Ye,st=Je,at=Qe,ut=$e;function lt(){return this instanceof lt?(et.call(this),tt(this,"_benchmarks",{value:[],configurable:!1,writable:!1,enumerable:!1}),tt(this,"_stream",{value:new rt,configurable:!1,writable:!1,enumerable:!1}),tt(this,"_closed",{value:!1,configurable:!1,writable:!0,enumerable:!1}),tt(this,"_running",{value:!1,configurable:!1,writable:!0,enumerable:!1}),tt(this,"total",{value:0,configurable:!1,writable:!0,enumerable:!0}),tt(this,"fail",{value:0,configurable:!1,writable:!0,enumerable:!0}),tt(this,"pass",{value:0,configurable:!1,writable:!0,enumerable:!0}),tt(this,"skip",{value:0,configurable:!1,writable:!0,enumerable:!0}),tt(this,"todo",{value:0,configurable:!1,writable:!0,enumerable:!0}),this):new lt}c(lt,et),tt(lt.prototype,"push",{value:nt,configurable:!1,writable:!1,enumerable:!1}),tt(lt.prototype,"createStream",{value:it,configurable:!1,writable:!1,enumerable:!1}),tt(lt.prototype,"run",{value:ot,configurable:!1,writable:!1,enumerable:!1}),tt(lt.prototype,"clear",{value:st,configurable:!1,writable:!1,enumerable:!1}),tt(lt.prototype,"close",{value:at,configurable:!1,writable:!1,enumerable:!1}),tt(lt.prototype,"exit",{value:ut,configurable:!1,writable:!1,enumerable:!1});var ct=lt,ft={skip:!1,iterations:null,repeats:3,timeout:3e5},ht=a,mt=u,pt=s.isPrimitive,dt=w,vt=b.isPrimitive,wt=n;var bt=function(e,t){return ht(t)?mt(t,"skip")&&(e.skip=t.skip,!pt(e.skip))?new TypeError(wt("05d30","skip",e.skip)):!mt(t,"iterations")||(e.iterations=t.iterations,vt(e.iterations)||dt(e.iterations))?mt(t,"repeats")&&(e.repeats=t.repeats,!vt(e.repeats))?new TypeError(wt("05d3b","repeats",e.repeats)):mt(t,"timeout")&&(e.timeout=t.timeout,!vt(e.timeout))?new TypeError(wt("05d3b","timeout",e.timeout)):null:new TypeError(wt("05d8Z","iterations",e.iterations)):new TypeError(wt("05d2h",t))},gt=o.isPrimitive,yt=l,_t=Ne;var jt=function(e,t,r,n){var i,o,s,a,u;s=0,a=0,(o=yt(t)).iterations=1,(u=new _t(e,o,r)).on("result",(function(e){gt(e)||e.ok||e.todo||(i=!0)})),u.on("tic",(function(){s+=1})),u.on("toc",(function(){a+=1})),u.once("end",(function(){var e;i?e=new Error("unexpected error. Benchmark failed."):1===s&&1===a||(e=new Error("unexpected error. Invalid benchmark."));if(e)return n(e);return n()})),u.run()},kt=o.isPrimitive,xt=l,Et=Ne;var Tt=jt,Lt=function(e,t,r,n){var i,o;return o=0,(i=xt(t)).iterations=10,s();function s(){var t=new Et(e,i,r);t.on("result",a),t.once("end",u),t.run()}function a(e){kt(e)||"result"!==e.operator||(o=e.elapsed)}function u(){if(o<.1&&i.iterations<1e10)return i.iterations*=10,s();n(null,i.iterations)}};var Pt=function(e,t,r,n){if(!r)return t.repeats=1,n(e,t,r);if(t.skip)return t.repeats=1,n(e,t,r);function i(i,o){return i?(t.repeats=1,t.iterations=1,n(e,t,r)):(t.iterations=o,n(e,t,r))}Tt(e,t,r,(function(o){if(o)return t.repeats=1,t.iterations=1,n(e,t,r);if(t.iterations)return n(e,t,r);Lt(e,t,r,i)}))},Ot=t,Ct=i,Mt=o.isPrimitive,St=r,At=s.isPrimitive,Dt=a,Nt=u,qt=n,Rt=l,It=Ne,Xt=ct,zt=ce,Gt=ft,Kt=bt,Ut=Pt;var Vt=function(e,t){var r,n,i,o,s;if(o={},1===arguments.length)if(St(e))s=e;else{if(!Dt(e))throw new TypeError(qt("invalid argument. Must provide either an options object or a function. Value: `%s`.",e));o=e}else if(arguments.length>1){if(!Dt(e))throw new TypeError(qt("05d3X",e));if(Nt(e,"autoclose")&&(o.autoclose=e.autoclose,!At(o.autoclose)))throw new TypeError(qt("05d30","autoclose",o.autoclose));if(!St(s=t))throw new TypeError(qt("05d2S",s))}function a(e,t,r){var n,o,s;if(!Mt(e))throw new TypeError(qt("05d3R",e));if(n=Rt(Gt),2===arguments.length){if(St(t))s=t;else if(o=Kt(n,t))throw o}else if(arguments.length>2){if(o=Kt(n,t))throw o;if(!St(s=r))throw new TypeError(qt("05d3Z",s))}return i.push([e,n,s]),1===i.length&&zt(u),a}function u(){var e=-1;return t();function t(){var t;if((e+=1)===i.length)return i.length=0,n.run();t=i[e],Ut(t[0],t[1],t[2],r)}function r(e,r,i){var o,s;for(s=0;s<r.repeats;s++)(o=new It(e,r,i)).on("result",l),n.push(o);return t()}}function l(e){Mt(e)||e.ok||e.todo||(r=1)}function c(e){return arguments.length?n.createStream(e):n.createStream()}function f(){n.close()}function h(){n.exit()}function m(){return r}return n=new Xt,o.autoclose&&n.once("done",f),s&&n.once("done",s),r=0,i=[],Ot(a,"createStream",c),Ot(a,"close",f),Ot(a,"exit",h),Ct(a,"exitCode",m),a},Bt="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function Wt(){throw new Error("setTimeout has not been defined")}function Zt(){throw new Error("clearTimeout has not been defined")}var Ft=Wt,Ht=Zt;function Yt(e){if(Ft===setTimeout)return setTimeout(e,0);if((Ft===Wt||!Ft)&&setTimeout)return Ft=setTimeout,setTimeout(e,0);try{return Ft(e,0)}catch(t){try{return Ft.call(null,e,0)}catch(t){return Ft.call(this,e,0)}}}"function"==typeof Bt.setTimeout&&(Ft=setTimeout),"function"==typeof Bt.clearTimeout&&(Ht=clearTimeout);var Jt,Qt=[],$t=!1,er=-1;function tr(){$t&&Jt&&($t=!1,Jt.length?Qt=Jt.concat(Qt):er=-1,Qt.length&&rr())}function rr(){if(!$t){var e=Yt(tr);$t=!0;for(var t=Qt.length;t;){for(Jt=Qt,Qt=[];++er<t;)Jt&&Jt[er].run();er=-1,t=Qt.length}Jt=null,$t=!1,function(e){if(Ht===clearTimeout)return clearTimeout(e);if((Ht===Zt||!Ht)&&clearTimeout)return Ht=clearTimeout,clearTimeout(e);try{Ht(e)}catch(t){try{return Ht.call(null,e)}catch(t){return Ht.call(this,e)}}}(e)}}function nr(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];Qt.push(new ir(e,t)),1!==Qt.length||$t||Yt(rr)}function ir(e,t){this.fun=e,this.array=t}ir.prototype.run=function(){this.fun.apply(null,this.array)};var or={},sr=[],ar={},ur={},lr={};function cr(){}var fr=cr,hr=cr,mr=cr,pr=cr,dr=cr,vr=cr,wr=cr;function br(e){throw new Error("process.binding is not supported")}function gr(){return"/"}function yr(e){throw new Error("process.chdir is not supported")}function _r(){return 0}var jr=Bt.performance||{},kr=jr.now||jr.mozNow||jr.msNow||jr.oNow||jr.webkitNow||function(){return(new Date).getTime()};function xr(e){var t=.001*kr.call(jr),r=Math.floor(t),n=Math.floor(t%1*1e9);return e&&(r-=e[0],(n-=e[1])<0&&(r--,n+=1e9)),[r,n]}var Er=new Date;function Tr(){return(new Date-Er)/1e3}var Lr={nextTick:nr,title:"browser",browser:true,env:or,argv:sr,version:"",versions:ar,on:fr,addListener:hr,once:mr,off:pr,removeListener:dr,removeAllListeners:vr,emit:wr,binding:br,cwd:gr,chdir:yr,umask:_r,hrtime:xr,platform:"browser",release:ur,config:lr,uptime:Tr},Pr=E(Object.freeze({__proto__:null,addListener:hr,argv:sr,binding:br,browser:true,chdir:yr,config:lr,cwd:gr,default:Lr,emit:wr,env:or,hrtime:xr,nextTick:nr,off:pr,on:fr,once:mr,platform:"browser",release:ur,removeAllListeners:vr,removeListener:dr,title:"browser",umask:_r,uptime:Tr,version:"",versions:ar})),Or=Pr&&"function"==typeof Pr.exit,Cr=!g&&Or;var Mr=e,Sr=x,Ar=function(e){console.log(e)};var Dr=function(){var e,t;return e=new Mr({transform:function(e,n,i){var o,s;for(s=0;s<e.length;s++)"\n"===(o=Sr(e[s]))?r():t+=o;i()},flush:r}),t="",e;function r(r){try{Ar(t)}catch(t){e.emit("error",t)}if(t="",r)return r()}},Nr=r,qr=s.isPrimitive,Rr=a,Ir=y,Xr=u,zr=n,Gr=_,Kr=j,Ur=k,Vr=Vt,Br=Dr,Wr=Cr,Zr=Pr;var Fr,Hr=function(){var e,t,r,n,i,o,s;if(0===arguments.length)n={},s=Ur;else if(1===arguments.length)if(Nr(arguments[0]))n={},s=arguments[0];else{if(!Rr(arguments[0]))throw new TypeError(zr("invalid argument. Must provide either an options object or a function. Value: `%s`.",arguments[0]));n=arguments[0],s=Ur}else{if(!Rr(n=arguments[0]))throw new TypeError(zr("05d3X",n));if(!Nr(s=arguments[1]))throw new TypeError(zr("05d2S",s))}if(o={},Xr(n,"autoclose")&&(o.autoclose=n.autoclose,!qr(o.autoclose)))throw new TypeError(zr("05d30","autoclose",o.autoclose));if(Xr(n,"stream")&&(o.stream=n.stream,!Ir(o.stream)))throw new TypeError(zr("05d3Y","stream",o.stream));return e=0,i=Gr(o,["autoclose"]),r=Vr(i,a),i=Kr(n,["autoclose","stream"]),t=r.createStream(i).pipe(o.stream||Br()),Wr&&(t.on("error",u),Zr.on("exit",l)),r;function a(){return s()}function u(){e=1}function l(t){0===t&&(r.close(),Zr.exit(e||r.exitCode))}},Yr=Cr,Jr=Hr;var Qr=function e(t,r){var n,i;return Fr||(arguments.length>1?(n=t,i=r):(n={},i=t),n.autoclose=!Yr,Fr=Jr(n,i),e.cached=!0,Fr)},$r=e,en=t,tn=r,rn=n,nn=Qr,on=[];function sn(){var e,t;for(e=on.length,t=0;t<e;t++)on.shift()()}function an(e,t,r){var n=nn(sn);return arguments.length<2?n(e):2===arguments.length?n(e,t):n(e,t,r),an}en(an,"createHarness",Vt),en(an,"createStream",(function(e){var t,r;return r=arguments.length?e:{},nn.cached?nn().createStream(r):(t=new $r(r),r.stream=t,nn(r,sn),t)})),en(an,"onFinish",(function(e){var t;if(!tn(e))throw new TypeError(rn("05d3V",e));for(t=0;t<on.length;t++)if(e===on[t])throw new Error(rn("05d0B"));on.push(e)}));var un=an;export{un as default};
//# sourceMappingURL=index.mjs.map
